#cpp 2022/7/24
## 构造函数
- 作用：保证每个对象的数据成员具有合适的初始值
- 构造函数初始化式(初始化列表)
- 默认实参域构造函数
- 隐式类类型缓缓
- 类成员的显示初始化

每个类都分别定义了它的对象被初始化的方式，类通过一个或几个特殊的成员函数来控制其对象的初始化过程，这些函数叫做**构造函数**(constructor)，构造函数的任务是**初始化类对象的数据成员**。

构造函数的名字和类名相同，没有返回类型。类可以包含多个构造函数，和其他重载函数类似，不同的构造函数之间必须在参数数量或参数类型上有所区别。

构造函数不能被声明成`const`的。构造函数在`const`对象的狗奥过程中可以向其写值。当创建类的一个`const`对象时，直到构造函数完成初始化过程，对象才能真正取得其“常量”属性。

### 合成的默认构造函数
类通过一个特殊的构造函数来控制默认初始化过程，这个函数叫作**默认构造函数**(default constructor)，**无须提供任何实参**。

如果类没有显式地定义构造函数，那么编辑器就会隐式地定义一个默认构造函数。编辑器创建地构造函数又被称为**合成的默认构造函数**。大多数情况下，这个合成的默认构造函数将按照如下规则初始化类的数据成员：
- 如果存在类内的初始值，用它来初始化成员。
- 否则，默认初始化该成员。
如果定义在块中的内置类型或符合类型(比如数组和指针)的对象被默认初始化，则它们的值将是未定义的。
### 定义Sales_data的构造函数
```cpp
struct Sales_data{
	//新增的构造函数
	Sales_data() = default;
	Sales_dat(const std::string &s) : bookNo(s) {}
	Sales_data(const std::string &s, unsigned n, double p) :
		bookNo(s), units_sold(n), revenue(p*n) {}
	Sales_data(std::istream &);
	//之前已有的其他成员
	...
};
```
### =default的含义
```cpp
Sales_data() = default;
```
因为该构造函数不接受任何实参，所以它是一个默认构造函数。我们定义这个构造函数仅仅是因为我们既需要其他形式的构造函数，也需要默认的构造函数。这个函数的作用完全等同于之前使用的合成默认构造函数。
### 构造函数的初始值列表
```cpp
Sales_dat(const std::string &s) : bookNo(s) {}
Sales_data(const std::string &s, unsigned n, double p) :
		bookNo(s), units_sold(n), revenue(p*n) {}
Sales_data(std::istream &);
```
冒号以及冒号和花括号之间的代码，花括号定义了(空的)函数体。这部分称为**构造函数初始值列表**。构造函数初始值是成员名字的一个列表，每个名字后面紧跟括号括起来的(或者花括号内的)成员初始值。不同成员的初始化通过逗号`,`分隔开来。

当某个数据成员被构造函数初始值列表忽略时，它将以与合成默认构造函数相同的方式隐式初始化。

在类外部定义构造函数，必须指明该构造函数是哪个类的成员。
```cpp
Sales_data::Sales_data(std::istream &is){
	read(is, *this);
}
```