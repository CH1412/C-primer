#linux 2022/7/31

## 目标

- 关机/重启
	- `shutdown`
- 查看或配置网卡信息
	- `ifconfig`
	- `ping`
- 远程登陆和复制文件
	- `ssh`
	- `scp`

## 01.关机/重启

| 序号 | 命令                 | 对应英文 | 作用 |
| ---- | -------------------- | -------- | ---- |
| 01   | `shutdown 选项 时间` | shutdown | 关机/重新启动     |

### 1.1 shutdown

- `shutdown`命令可以 安全 关闭 或者 重新启动

| 选项 | 含义     |
| ---- | -------- |
| `-r` | 重新启动 |
| `-c` | 取消关机/重启         |

>提示：
>- **不指定选项和参数**，默认表示**1分钟**之后关闭电脑
>- 远程维护服务器时，最好不要关闭系统，而应该重新启动系统

- 常用命令示例

```linux
# 重新启动操作系统，其中 now 表示现在
$ shutdown -r now

# 立即关机，其中 now 表示现在
$ shutdown now

# 系统在今天的 20：25 关机
$ shutdown 20:25

# 系统再过十分钟后自动关机
$ shutdown +10

# 取消之前指定的关机计划
$ shutdown -c
```



## 02.查看或配置网卡信息

| 序号 | 命令          | 对应英文                      | 作用                              |
| ---- | ------------- | ----------------------------- | --------------------------------- |
| 01   | `ifconfig`    | configure a network interface | 查看/配置计算机当前的网卡配置信息 |
| 02   | `ping ip地址` | ping                          | 检测到目标ip地址的连接是否正常                                  |

### 2.1网卡和IP地址

2022/8/1

**网卡**
- 网卡是一个专门负责网络通讯的硬件设备
- **IP地址**是设备在网卡的地址信息

>可以把 **电脑** 比作 **电话**，**网卡** 相当于 **SIM卡**，**IP地址** 相当于 **电话号码**

**IP地址**
- **每台联网的电脑都有IP地址，是保证电脑之间正常通讯的重要设置**

>注意：每台电脑的IP地址不能相同，否则会出现IP地址冲突，并且没有办法正常通讯

### 2.2 ifconfig

- `ifconfig` 可以查看/配置计算机当前的网卡配置信息

```linux
# 查看网卡配置信息
$ ifconfig
# 查看网卡对应的IP地址
$ ifconfig | grep inet
```

>提示：一台计算机中有可能会有一个 **物理网卡** 和 **多个虚拟网卡**，在Linux中物理网卡的名字通常以`ensXX`表示

- `127.0.0.1`被称为 **本地回环/环回地址**，一般用来测试本机网卡是否正常

### 2.3 ping

```linux
# 检测到目标主机是否连接正常
$ ping IP地址
# 检测本地网卡工作正常
$ ping 127.0.0.1
```

- `ping`一般用于检查当前计算机到目标计算机之间的网络 **是否通常，数值越大，速度越慢**
	- `ping`的工作原理与潜水艇的声纳相似，`ping`这个命令就是取自 声纳的声音
	- 网络管理原之间也常将 `ping` 用作动词——ping以下计算机X，看他是否开着

原理：网络上的机器都有 **唯一的IP地址**，我们给**目标IP地址**发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，可以确定目标主机的存在

>提示：在Linux中，要终止一个终端程序的执行，绝大多数都可以使用`Ctrl + C`

## 03.远程登陆和复制文件

2022/8/2

| 序号 | 命令                                              | 对应英文     | 作用          |
| ---- | ------------------------------------------------- | ------------ | ------------- |
| 01   | ssh 用户名@ip                                     | secure shell | 关机/重新启动 |
| 02   | ssh 用户名@ip:文件名或路径 用户名@ip:文件名或路径 | secure copy  | 远程复制文件              |

### 3.1 ssh基础(重点)

在Linux中SSH是 **非常常用** 的工具，通过 **SSH客户端** 可以连接到运行了**SSH服务器**的远程机器上

```md
	数据传输是加密的，可以防止信息泄露
	数据传输是压缩的，可以提高传输速度

SSH客户端---------------------------->SSH服务器
```

- **SSH客户端**是一种使用 `Secure Shell(SSH)` 协议连接到远程计算机的软件程序
- `SSH`是目前较可靠，**专为远程登陆会话和其它网络服务** 提供安全性的协议
	- 利用`SSH协议`可以有效**防止远程管理过程中的信息泄露**
	- 通过`SSH协议`可以对所有传输的数据进行加密，也能够防止DNS欺骗和IP欺骗
- `SSH`的另一项优点是传输的数据可以是经过压缩的，所有可以加快传输的速度

#### 1）域名 和 端口号

**域名**
- 由一串 **用点分隔** 的名字组成，例如：`www.baidu.cn`
- **是 IP地址 的别名，方便用户记忆**

**端口号**
- **IP地址**：通过**IP地址**找到**网络上的计算机**
- **端口号**：通过**端口号**可以找到**计算机运行的应用程序**
	- SSH服务器 的默认端口号是`22`，如果是默认端口号，在连接时。可以省略
- 常见服务器号列表

| **序号** | **服务**      | **端口号** |
| ---- | --------- | ------ |
| 01   | SSH服务器 | 22     |
| 02   | Web服务器 | 80     |
| 03   | HTTPS     | 443    |
| 04   | FTP服务器 | 21       |

####  2) SSH 客户端的简单使用

```linux
ssh [-p port] user@remote
```

- `user` 是在远程机器上的用户名，如果不指定的话默认为当前用户
- `remote` 是远程机器的地址，可以是IP/域名，或者是 后面会提到的别名
- `port` 是SSH Server监听的端口，如果不指定，就为默认值`22`

>提示：
>- 使用`exit`推出当前用户的登陆
>
>注意：
>- `ssh`这个终端命令只能在`linux`或者`UNIX`系统下使用
>- 如果在`Windows`系统中，可以安装`PuTTY`或者`XSehll`客户端软件即可
>
>提示：
>- 在工作中，SSH服务器的端口号很有可能不是`22`，如果遇到这种情况就需要使用`-p`选项，指定正确的端口号，否则无法正常连接到服务器

```linux
# 在linux终端中查找linxu ip 地址
$ ifconfig | grep inet
# 本地连接 linux 服务器
$ ssh charliehon@192.168.20.128
# 在本地通过命令行对linxu操作
```

#### 3) Windows下SSH客户端的安装

- `Putty` 
- `XShell`    http://xshellcn.com

>建议从官网下载正式的安装程序

### 3.2 scp(掌握)

- scp 就是 `secure copy`，是一个在Linux下用来 **远程拷贝文件** 的命令
- 它的**地址格式与ssh基本相同**，需要注意的是，在指定的端口时用的是**大写P**的`-P`而不是小写的

```linux
文件/目录<-------------------------------->文件/目录
 SSH客户端                                 SSH服务器 
```

```linux
# 把本地当前目录下的1.py文件 复制到 远程 家目录下的 Desttop/1.py
# 注意：`:`后面的路径如果不是绝对路径，则以用户的家目录作为参照路径
scp -P port 1.py user@remote:Desktop/1.py

# 把远程 家目录下的Desktop/1.py 文件 复制到 本地当前目录下的 1.py
scp -P port user@remote:Desktop/1.py 1.py

# 加上 -r 选项可以传送文件夹
# 把当前目录下的 demo 文件夹 复制到 远程 家目录下的 Desktop
scp -r demo user@remote:Desktop

# 把远程 家目录下的 Desktop 复制到 当前目录下的 demo文件夹
scp -r user@remote:Desktop demo
```

| 选项 | 含义                                                                                              |
| ---- | ------------------------------------------------------------------------------------------------- |
| `-r` | 若给出的源文件是目录文件，则scp将递归复制该文件目录下的所有子目录和文件，目标文件必须是一个目录名 |
| `-p` | 若远程SSH服务器的端不是 22，需要使用大写字母-P选项指定端口                                                                                                  |

p54